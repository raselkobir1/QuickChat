<div class="chat-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <h5 class="mb-2">Groups</h5>
        <ul class="list-group mb-4">
            <li class="list-group-item list-group-item-action" *ngFor="let group of groups"
                (click)="selectChat(group.id, true)" [class.active]="selectedChat === group.id">
                {{ group.name }}
            </li>
        </ul>

        <h5 class="mb-2">Users</h5>
        <ul class="list-group">
            <li class="list-group-item list-group-item-action" *ngFor="let user of users"
                (click)="selectChat(user.id, false)" [class.active]="selectedChat === user.id">
                {{ user.userName }}
            </li>
        </ul>
    </div>

    <!-- Chat area -->
    <div class="chat-area d-flex flex-column">
        <ng-container *ngIf="selectedChat; else placeholder">
            <h4 class="border-bottom pb-2 mb-3">
                Chat with {{ selectedChat.name }}
            </h4>

            <div class="flex-grow-1 overflow-auto mb-3">
                <div *ngFor="let msg of messages" class="mb-2">
                    <div class="chat-bubble" [ngClass]="{
                            'me': msg.senderId === loginUserId,
                            'other': msg.senderId !== loginUserId
                            }">
                        {{ msg.text }}
                    </div>
                    <small class="text-muted d-block" [ngClass]="{ 'text-end': msg.senderId === loginUserId }">
                        {{ msg.sentAt | date: 'shortTime' }}
                    </small>
                </div>

            </div>

            <div class="input-group">
                <input type="text" [(ngModel)]="messageInput" (keyup.enter)="sendMessage()"
                    placeholder="Type a message..." class="form-control" />
                <button class="btn btn-primary" (click)="sendMessage()">
                    <i class="bi bi-send"></i> <!-- Bootstrap icon -->
                </button>
            </div>
        </ng-container>

        <ng-template #placeholder>
            <div class="text-center text-muted mt-5">
                <p>Select a user or group to start chatting.</p>
            </div>
        </ng-template>
    </div>
</div>