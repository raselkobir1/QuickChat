<div class="container mt-1" style="max-width: 700px;">
    <div class="card shadow-sm rounded-4">

        <!-- Cover Image -->
        <!-- Profile Image -->
        <!-- <div class="profile-cover position-relative" style="height: 180px; overflow: hidden;">
            <img [src]="profile.coverImageUrl || 'assets/cover_default.jpg'" alt="Cover Image"
                class="w-100 h-100 object-fit-cover" />

            <img [src]="profile.imageUrl || 'assets/default-profile.jpg'" alt="Profile Image"
                class="rounded-circle position-absolute"
                style="width: 120px; height: 120px; bottom: -40px; left: 30px; border: 4px solid white; object-fit: cover;" />
        </div> -->

        <!-- Cover Image Upload -->
        <div class="mb-3">
            <div class="mb-2">
                <img [src]="coverImagePreview || profile.coverImageUrl || 'assets/cover_default.jpg'"
                    alt="Cover Image Preview" class="w-100 mb-2 rounded"
                    style="max-height: 150px; object-fit: cover;" />
            </div>
            <input type="file" accept="image/*" (change)="onCoverImageSelected($event)" />
        </div>

        <!-- Profile Image Upload -->
        <div class="mb-3 d-flex align-items-center">
            <div class="me-3">
                <img [src]="profileImagePreview || profile.profileImageUrl || 'assets/default-profile.jpg'"
                    alt="Profile Image Preview" class="rounded-circle"
                    style="width: 100px; height: 100px; object-fit: cover; border: 2px solid #ddd;" />
            </div>
            <div>
                <input type="file" accept="image/*" (change)="onProfileImageSelected($event)" />
            </div>
        </div>


        <div class="card-body pt-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="fw-bold">{{ profile.fullName || 'No Name Provided' }}</h3>
                <button class="btn btn-outline-primary" (click)="toggleEdit()">
                    {{ editMode ? 'Cancel' : 'Edit Profile' }}
                </button>
            </div>
            <hr />

            <form *ngIf="editMode; else viewMode" [formGroup]="profileForm" (ngSubmit)="onSave()">
                <div class="mb-3">
                    <label for="email" class="form-label fw-semibold">Email</label>
                    <input id="email" type="email" formControlName="email" class="form-control"
                        [class.is-invalid]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" />
                    <div *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched"
                        class="invalid-feedback">
                        Please enter a valid email.
                    </div>
                </div>

                <div class="mb-3">
                    <label for="fullName" class="form-label fw-semibold">Full Name</label>
                    <input id="fullName" type="text" formControlName="fullName" class="form-control"
                        [class.is-invalid]="profileForm.get('fullName')?.invalid && profileForm.get('fullName')?.touched" />
                    <div *ngIf="profileForm.get('fullName')?.invalid && profileForm.get('fullName')?.touched"
                        class="invalid-feedback">
                        Full Name is required.
                    </div>
                </div>


                <!-- Date of Birth -->
                <div class="mb-3">
                    <label for="dob" class="form-label fw-semibold">Date of Birth</label>
                    <input type="date" id="dob" formControlName="dateOfBirth" class="form-control" />
                </div>

                <!-- Addresses -->
                <div class="mb-3">
                    <label for="permanentAddress" class="form-label fw-semibold">Permanent Address</label>
                    <textarea id="permanentAddress" formControlName="parmanantAddress" class="form-control" rows="2"
                        placeholder="Permanent address"></textarea>
                </div>

                <div class="mb-3">
                    <label for="presentAddress" class="form-label fw-semibold">Present Address</label>
                    <textarea id="presentAddress" formControlName="presentAddress" class="form-control" rows="2"
                        placeholder="Present address"></textarea>
                </div>

                <!-- Phone Number -->
                <div class="mb-3">
                    <label for="phoneNumber" class="form-label fw-semibold">Phone Number</label>
                    <input type="text" id="phoneNumber" formControlName="phoneNumber" class="form-control"
                        placeholder="Phone Number" />
                </div>

                <!-- Education and Work -->
                <div class="mb-3">
                    <label for="universityName" class="form-label fw-semibold">University Name</label>
                    <input type="text" id="universityName" formControlName="universityName" class="form-control"
                        placeholder="University Name" />
                </div>
                <div class="mb-3">
                    <label for="collageName" class="form-label fw-semibold">College Name</label>
                    <input type="text" id="collageName" formControlName="collageName" class="form-control"
                        placeholder="College Name" />
                </div>
                <div class="mb-2">
                    <label for="workPlaceName" class="form-label fw-semibold">Workplace Name</label>
                    <input type="text" id="workPlaceName" formControlName="workPlaceName" class="form-control"
                        placeholder="Workplace Name" />
                </div>

                <!-- Buttons -->
                <div class="d-flex justify-content-end">
                    <button type="button" class="btn btn-secondary me-2" (click)="toggleEdit()">Cancel</button>
                    <button type="submit" class="btn btn-success" [disabled]="profileForm.invalid">Update</button>
                </div>
            </form>

            <!-- View mode -->
            <ng-template #viewMode>
                <dl class="row">
                    <dt class="col-sm-4">Email</dt>
                    <dd class="col-sm-8">{{ profile.email || 'Not provided' }}</dd>

                    <dt class="col-sm-4">Date of Birth</dt>
                    <dd class="col-sm-8">
                        {{ profile.dateOfBirth ? (profile.dateOfBirth | date:'mediumDate') : 'Not provided' }}</dd>

                    <dt class="col-sm-4">Permanent Address</dt>
                    <dd class="col-sm-8">{{ profile.parmanantAddress || 'Not provided' }}</dd>

                    <dt class="col-sm-4">Present Address</dt>
                    <dd class="col-sm-8">{{ profile.presentAddress || 'Not provided' }}</dd>

                    <dt class="col-sm-4">PhoneNumber</dt>
                    <dd class="col-sm-8">{{ profile.phoneNumber || 'Not provided' }}</dd>

                    <dt class="col-sm-4">University</dt>
                    <dd class="col-sm-8">{{ profile.universityName || 'Not provided' }}</dd>

                    <dt class="col-sm-4">College</dt>
                    <dd class="col-sm-8">{{ profile.collageName || 'Not provided' }}</dd>

                    <dt class="col-sm-4">Workplace</dt>
                    <dd class="col-sm-8">{{ profile.workPlaceName || 'Not provided' }}</dd>
                </dl>
            </ng-template>
        </div>
    </div>
</div>